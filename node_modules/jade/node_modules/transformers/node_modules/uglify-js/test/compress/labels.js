{
    options = {if_return: true, conditionals: true, dead_code: true};
    input: {
        out: {
            if (foo) break out;
            console.log("bar");
        }
    }
    ;
    expect: {
        foo || console.log("bar");
    }
}

{
    options = {if_return: true, conditionals: true, dead_code: true};
    input: {
        out: {
            if (foo) print("stuff");
            else break out;
            console.log("here");
        }
    }
    ;
    expect: {
        if (foo) {
            print("stuff");
            console.log("here");
        }
    }
}

{
    options = {if_return: true, conditionals: true, dead_code: true};
    input: {
        for (var i = 0; i < 5; ++i) {
            if (i < 3) continue;
            console.log(i);
        }
    }
    ;
    expect: {
        for (var i = 0; i < 5; ++i)
            i < 3 || console.log(i);
    }
}

{
    options = {if_return: true, conditionals: true, dead_code: true};
    input: {
        out: for (var i = 0; i < 5; ++i) {
            if (i < 3) continue out;
            console.log(i);
        }
    }
    ;
    expect: {
        for (var i = 0; i < 5; ++i)
            i < 3 || console.log(i);
    }
}

{
    options = {if_return: true, conditionals: true, dead_code: true};
    // should keep the break-s in the following
    input: {
        while (foo) {
            if (bar) break;
            console.log("foo");
        }
        out: while (foo) {
            if (bar) break out;
            console.log("foo");
        }
    }
    ;
    expect: {
        while (foo) {
            if (bar) break;
            console.log("foo");
        }
        out: while (foo) {
            if (bar) break out;
            console.log("foo");
        }
    }
}

{
    input: {
        out: break out;
    }
    ;
    expect: {
    }
}

{
    options = {if_return: true, conditionals: true, dead_code: true};
    input: {
        while (foo) {
            x();
            y();
            continue;
        }
    }
    ;
    expect: {
        while (foo) {
            x();
            y();
        }
    }
}

{
    options = {if_return: true, conditionals: true, dead_code: true};
    input: {
        while (foo) {
            x();
            y();
            break;
        }
    }
    ;
    expect: {
        while (foo) {
            x();
            y();
            break;
        }
    }
}

{
    options = {if_return: true, conditionals: true, dead_code: true};
    input: {
        out: while (foo) {
            x();
            y();
            continue out;
            z();
            k();
        }
    }
    ;
    expect: {
        while (foo) {
            x();
            y();
        }
    }
}

{
    options = {if_return: true, conditionals: true, dead_code: true};
    input: {
        out: while (foo) {
            x();
            y();
            break out;
            z();
            k();
        }
    }
    ;
    expect: {
        out: while (foo) {
            x();
            y();
            break out;
        }
    }
}
